# Преподавателям и разработчикам

Содержание

- TODO

Используемые технологии

- TODO

## Создание книги

Чтобы создать книгу в первый раз, понадобится Docker.
Docker позволяет поместить необходимые для создания книги инструменты в контейнер, минимизируя влияние внешнего окружения.

Скачивание Docker и исходных файлов книги

1. Установите Docker с официального сайта https://www.docker.com/.
1. Запустите Docker Desktop для проверки работоспособности.
1. Склонируйте git-репозиторий книги с исходными файлами `git clone ...`.

Далее создаётся Docker образ (image) для работы с книгой.
Образ включает в себя `ubuntu`, `python3`, `julia` и необходимые библиотеки.
Полное описание вы найдёте в файле `Dockerfile`.
Создание образа занимает около 10 минут и требует примерно 2 ГиБ памяти.

Перейдите в корневую директорию репозитория книги (туда, где `Makefile`).
Затем выполните команду.

```console
make docker-image
```

В результате создаётся образ с названием `compthermobook-image` (см. `Makefile`).
Вы также его увидите в Docker Desktop во вкладе Images.

Теперь создаём Docker контейнер на основе образа.

```console
make docker-container
```

В результате создаётся контейнер с названием `compthermobook`.
Проверьте Docker Desktop, во вкладе `Containers` он должен появиться.

Запустите контейнер командой.
```console
make docker-container-start
```

И попробуйте к нему подключиться (используется bash оболочка).
```console
make docker-container-inspect
```

В этом контейнере вы root пользователь и по умолчанию попадаете в домашнюю директорию пользователя --- `/root/`.
Можете попробовать запустить Python командой `python3` или Julia командной `julia`.

Чтобы отключиться из контейнера, введите `exit` или `Ctrl+D`.
Отключитесь от контейнера.

Базовый шаблон работы с книгой следующий.
1. Вы вносите изменения в исходный код книги (`book/`).
1. Сохраняете изменения.
1. Затем пользуетесь `make` командами `html`, `html-all`, `html-clean`, `html-clean-all`.

Контейнер настроен так, что содержимое директории `book/` синхронизировано с директорией `/root/book/` в контейнере.
Когда вы сохраняете изменения, они появляются и в контейнере.
При использовании `make` команд в контейнер отправляются на исполнение команды для создания веб-файлов книги.
Веб-файлы (компиляция книги для веба из исходников) располагается по умолчанию в `book/_build/html` (и в `/root/book/_build/html` в контейнере).

Первое создание книги может длиться долго, поскольку `jupyter-book` будет исполнять код из материалов книги.

Чтобы создать книгу в первый раз, воспользуйтесь.
```console
make html
```

Проверьте, что локально появилась директория `book/_build/html`.
Можете открыть страницу `book/_build/html/index.html` в браузере для проверки.

Локальной версией не всегда удобно пользоваться, поэтому можете создать сервер командой.
```console
make local-server
```
Сервер запустится в контейнере, а открыть книгу можно в браузере по адресу `http://localhost:8080/`.
